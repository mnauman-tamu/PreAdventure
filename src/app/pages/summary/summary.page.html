<div id="background" color="primary" [ngStyle]="{'background-image': 'url(' + imageName + ')'}">
  <h1 class="mat-display-3 text-outline" style="text-align: center; padding-top: 15px; margin-bottom: 10px !important;">Adventure Summary</h1>
  <!-- <p class = "text-outline" style="text-align: center;">Click "More Detail" to find out more about each element of your adventure.</p> -->
  <div fxLayout="row" fxLayoutAlign="center stretch">
  <div class = "row">
    <div class="column" *ngFor="let image of images">
      <div class="container">
        <img src = "{{image.urls.raw}}"  alt = "{{image.description}}" width=28% height=auto class="image">
        <div class="overlay"><a href = "{{image.urls.raw}}" target="_blank"> {{image.description}}</a> by <a href = "{{image.user.links.html}}" target="_blank"> {{image.user.name}}</a> from <a rel="noopener noreferrer" href="https://unsplash.com/" target="_blank"> Unsplash </a></div>
      </div>
    </div>
  </div>
  </div>
  <!--City will be a variable
  <a href = "https://unsplash.com/s/photos/<%City%>">More Photos</a>-->

  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Points of Interest</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">
          <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState = true"
                                (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Attractions
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Best places to visit for your destination
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <mat-divider></mat-divider>
              <div *ngIf="taAttractions.length > 0">
                <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" *ngFor="let i of range5">
                  <p><b><a class="website" href={{taAttractions[i].webURL}} target="_blank">{{taAttractions[i].name}}</a></b></p>
                  <p>{{taAttractions[i].rating}}/5.0</p>
                  <p>{{taAttractions[i].address}}</p>
                </div>
              </div>
              <mat-action-row style="justify-content: flex-start">
                <a mat-button [routerLink]="['/attractions']" color="primary">More Details</a>
              </mat-action-row>
            </mat-expansion-panel>
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState = true"
                                (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Hotels
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Find the best hotels for your destination
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <mat-divider></mat-divider>
              <div *ngIf="taHotels.length > 0">
                <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" *ngFor="let i of range5">
                  <p><b><a class="website" href={{taHotels[i].webURL}} target="_blank">{{taHotels[i].name}}</a></b></p>
                  <p>{{taHotels[i].rating}}/5.0</p>
                  <p>{{taHotels[i].address}}</p>
                </div>
              </div>
              <mat-action-row style="justify-content: flex-start">
                <button mat-button routerLink="/hotels" color="primary">More Details</button>
              </mat-action-row>
            </mat-expansion-panel>
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState1 = true"
                                (closed)="panelOpenState1 = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Restaurants
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Click to {{panelOpenState1 ? 'close' : 'open'}}
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <mat-divider></mat-divider>
              <div *ngIf="taRestaurants.length > 0">
                <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" *ngFor="let i of range5">
                  <p><b><a class="website" href={{taRestaurants[i].webURL}} target="_blank">{{taRestaurants[i].name}}</a></b></p>
                  <p>{{taRestaurants[i].rating}}/5.0</p>
                  <p>{{taRestaurants[i].address}}</p>
                </div>
              </div>
              <mat-action-row style="justify-content: flex-start">
                <a mat-button [routerLink]="['/restaurants']" color="primary">More Details</a>
              </mat-action-row>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-card-content>
      <mat-card-actions>
      </mat-card-actions>
    </mat-card>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Flights</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">
          <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState2 = true"
                                (closed)="panelOpenState2 = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Flight time and Prices
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Click to {{panelOpenState2 ? 'close' : 'open'}}
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <mat-divider></mat-divider>
              <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" id="FlightsData">
                <div *ngIf="outflights.length > 0">
                  <p><b>Outbound Flights</b></p>
                  <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" *ngFor="let flight of outflights">
                    <p>{{flight.originName}} Airport to {{flight.destinationName}} Airport</p>
                    <p>{{flight.airlineName}} ${{flight.price}}</p>
                  </div>
                </div>
                <div *ngIf="inflights.length > 0">
                  <br>
                  <p><b>Inbound Flights</b></p>
                  <div class="sub-expansion-container" fxLayout="column" fxLayoutAlign="space-between" *ngFor="let flight of inflights">
                    <p>{{flight.originName}} Airport to {{flight.destinationName}} Airport</p>
                    <p>{{flight.airlineName}} ${{flight.price}}</p>
                  </div>
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Weather</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">
          <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState3 = true"
                                (closed)="panelOpenState3 = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Forecast
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Click to {{panelOpenState3 ? 'close' : 'open'}}
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <mat-divider></mat-divider>
              <div *ngIf="forecastRange.length != 0">
                <div class="sub-expansion-container" fxLayout="row" fxLayoutAlign="space-between" *ngFor="let day of forecastRange">
                  <p>{{dates[day]}}</p>
                  <p>{{forecast[day].temp.min}} - {{forecast[day].temp.max}}</p>
                  <p>{{forecast[day].weather[0].description}}</p>
                  <img height="50px" width="50px" alt="weather icon" src="http://openweathermap.org/img/wn/{{forecast[day].weather[0].icon}}@2x.png">
                </div>
              </div>
              <div *ngIf="forecastRange.length == 0">
                <h3 class="mat-display-1" style="text-align: center; margin-top: 20px; margin-bottom: 20px;">No forecast data available.</h3>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button routerLink="/weather" color="primary" mat-button>More Details</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Crime Data</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">
          <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState5 = true"
                                (closed)="panelOpenState5 = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}} Crime Data
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Click to {{panelOpenState5 ? 'close' : 'open'}}
                  {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}} is rank
                  {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].rank}} for lowest violent crime.
                  {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}} is rank
                  {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].rank}} for lowest violent crime.
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <p class="mat-body" style="font-size: 18px !important;">{{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}} is rank
              <strong>{{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].rank}}</strong> for lowest violent crime rate with
              a rate of <strong>{{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].crime}}</strong> people.
              For the entire year of 2018 {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}}'s total murder
              count was <strong>{{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].murders}}</strong>. Be wary when going
              to <strong>{{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].city}}</strong> as this is
              {{dataService.stateCrime[mapQuestLocation.results[0].locations[0].adminArea3].name}}'s most dangerous city.</p>
              <!--<div *ngIf="crimeDone">
                <div class="sub-expansion-container" fxLayout="column" *ngFor="let ori of ORIs">
                  <p><b>{{ori}}: {{ORIData[ori].agency_name}}</b></p>
                  <div *ngFor="let elem of ORICrimeData[ori].results" fxLayout="row" fxLayoutAlign="space-between">
                    <p>{{elem.offense}} :</p>
                    <p>Actual = {{elem.actual}},</p>
                    <p>Cleared = {{elem.cleared}}</p>
                  </div>
                </div>
              </div>-->
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/crime" color="primary" (click)="test()">More Details</button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Images</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">

          <div *ngIf="!isMobileLayout">
            <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
              <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState = true"
                                   (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Images Panel
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                    Click here to view photos
                  </mat-panel-description> -->
                </mat-expansion-panel-header>
                  <div class="sub-expansion-container" fxLayoutAlign="space-evenly" *ngFor="let image of images">
                    <div class="column">
                      <div fxFlex="20%">
                        <a href = "{{image.urls.raw}}" target="_blank"> {{image.description}}</a><br>
                      </div>
                      <div fxFlex="50%">
                        <img src = "{{image.urls.small}}"  alt = "{{image.description}}" width=100% height=auto>
                      </div>
                      <div fxFlex="20%">
                        <p>Photo by <a href = "{{image.user.links.html}}" target="_blank"> {{image.user.name}}</a> from <a rel="noopener noreferrer" href="https://unsplash.com/" target="_blank"> Unsplash </a></p>
                      </div>
                    </div>
                  </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
          <div *ngIf="isMobileLayout">
            <mat-accordion class="accordion" fxLayout="row" fxLayoutAlign="start center">
              <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState = true"
                                   (closed)="panelOpenState = false">
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    Images Panel
                  </mat-panel-title>
                  <!-- <mat-panel-description>
                    Click here to view photos
                  </mat-panel-description> -->
                </mat-expansion-panel-header>
                <div class="row" fxLayoutAlign="space-evenly" style="display: flex" *ngFor="let image of images">
                  <a href = "{{image.urls.raw}}" target="_blank"> {{image.description}}</a><br>
                  <img src = "{{image.urls.small}}"  alt = "{{image.description}}" width=100% height=auto>
                  <p>Photo by <a href = "{{image.user.links.html}}" target="_blank"> {{image.user.name}}</a> from <a rel="noopener noreferrer" href="https://unsplash.com/" target="_blank"> Unsplash </a></p>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button routerLink="/photos" color="primary" mat-button>More Details</button>
      </mat-card-actions>
    </mat-card>
  </div>
  <div fxLayout="row" fxLayoutAlign="space-evenly center">
    <mat-card class="card-container">
      <mat-card-title>Music</mat-card-title>
      <mat-card-content style="margin-bottom: 0px !important; margin-top: 20px;">
        <div fxLayout="row" fxLayoutAlign="center stretch">
          <mat-accordion class="accordion" fxLayout="column" fxLayoutAlign="start center">
            <mat-expansion-panel fxFlexAlign="stretch" style="margin-bottom: 20px;" (opened)="panelOpenState = true"
                                 (closed)="panelOpenState = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  Music Panel
                </mat-panel-title>
                <!-- <mat-panel-description>
                  Click here to view songs
                </mat-panel-description> -->
              </mat-expansion-panel-header>
              <div *ngIf="!isMobileLayout">
                <div class="sub-expansion-container" fxLayout="row" fxLayoutAlign="space-between" style="display: flex" *ngFor="let song of music">
                  <p><a href = "{{song.artistViewUrl}}" target="_blank">{{song.artistName}}</a></p>
      <!-- <p>{{song.trackViewUrl}}</p> -->
                  <p><a href = "{{song.collectionViewUrl}}" target="_blank">{{song.trackCensoredName}}</a></p>
                  <iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="250" style="width:100%;max-width:360px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" [src]='song.trackViewUrl | safe'></iframe>
                </div>
              </div>
              <div *ngIf="isMobileLayout">
                <div class="row" fxLayout="row" fxLayoutAlign="space-between" style="display: flex" *ngFor="let song of music">
                  <p><a href = "{{song.artistViewUrl}}" target="_blank">{{song.artistName}}</a></p>
                  <!-- <p>{{song.trackViewUrl}}</p> -->
                  <p><a href = "{{song.collectionViewUrl}}" target="_blank">{{song.trackCensoredName}}</a></p>
                  <iframe allow="autoplay *; encrypted-media *;" frameborder="0" height="250" style="width:100%;max-width:360px;overflow:hidden;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" [src]='song.trackViewUrl | safe'></iframe>
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button routerLink="/music" color="primary" mat-button>More Details</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>



  <!--The code below is from the previous summary page-->
<!--<div *ngFor="let POI of POIs">-->
<!--  <p>{{POI.result_object.name}} : {{POI.result_object.rating}} stars</p>-->
<!--</div>-->
<!--<div *ngFor="let element of forecast">-->
<!--  <p>{{element.dt_txt}} : {{element.main.temp}} degrees</p>-->
<!--</div>-->

